# js
闭包
//js的作用域分两种，全局和局部，基于我们所熟悉的作用域链相关知识，我们知道在js作用域环境中访问变量的权利是由内向外的，内部作用域可以获得当前作用域下的变量并且可以获得当前包含当前作用域的外层作用域 下的变量，反之则不能，也就是说在外层作用域下无法获取内层作用域下的变量，同样在不同的函数作用域中也是不能相互访问彼此变量的，那么我们想在一个函数内部也有限权访问另一个函数内部的变量该怎么办呢？闭包就是用来解决这一需求的，闭包的本质就是在一个函数内部创建另一个函数。
//闭包有三个特性:1.函数嵌套函数，2.函数内部可以引用函数外部的参数和变量，3.参数和变量不会被垃圾回收机制回收
//闭包的好处和坏处
    好处:1.保护函数内部的变量安全，实现封装，防止变量流入其他环境发生命名冲突
        2.在内存中维持一个变量，可以做缓存（但是同时多了一项缺点，消耗内存）
        3.匿名自执行函数可以减少内存消耗
    坏处:1.被引用的私有变量不能被销毁，增大了内存消耗，造成内存泄漏，解决方法是可以再使用完变量后手动赋值为null
        2.其次由于闭包涉及跨域访问，所以会导致性能损失，我们可以通过把跨作用域变量存储在局部变量中，然后直接访问局部变量，来减轻对执行速度的影响




function fn(){
  var num = 4
  return function(){
    var n = 0;
    console.log(++n)
    console.log(++num)
  }
}
var fn1 = fn()
fn1() //1 5
fn1() //1 6
